---
description: >-
  В этой главе мы рассмотрим базовые понятия, которые Вы в любом случае будете
  использовать на практике и использовать их в общении с другими людьми.
---

# Синтаксис, комментарии, опкоды, команды. Команды wait и script\_name

Начнём из терминов и синтаксиса. Собственно первым будем само  слово «`Синтаксис`» — это набор правил, которые понимают редакторы кода (и Sanny Builder в том числе). Эти правила позволяют избежать ошибок, которые возникают при неправильном напасании кода в их окружении. Если написать что-то, что не соответсвует правилам, редакторы сообщают об синтаксиеской ошибке с описанием того, что там не так и где это случилось. Для успешного выпонения сборки нашего кода нужно будет написать код так, чтобы таких ошибок не возникало. Это можно навазать первым шагом — умение соблюдать синтаксис.

### «Комментарий»

Некоторый код Sanny Builder будет игнорировать при сборке скрипта. Такой код назвают комментариями и смысл их как раз делать напоминание или уточние для себя или других людей. Я называю такие комментарии <mark style="color:orange;">**явными**</mark>. Сейчас есть три типа комментариев со следующим синтаксисом:

* Однострочный комментарий. Начинается с символом `//` и продолжается до конца строки:

```clike
// это комментарий
```

* Многострочный комментарий. Начинающийся символами `/*` и заканчивающиемся `*/`:

```clike
/*
Можно написать комментарий в
несколько строк, если осталось мало места
и читать будет неудобно
*/
```

* Многострочный комментарий. Начинающийся символом `{` и заканчивающиемся `}`:&#x20;

```pascal
{ Многострочные комментарии не обязательно писать на разных строках }
```

{% hint style="danger" %}
Комментарием не будет считаться синтаксис, если после символа `{` сразу же идёт символ `$`. С этим исключением мы познакомимся при первой встрече с ним.
{% endhint %}

### «Опкод»

Под этим словом подразумевается некая команда, которую будет выполнять игра. За каждым опкодом закреплён его персональный уникальный идентификатор (также известен как номер) и набор параметров (аргументов), которые необходимы для правильного выполнения одкода игрой. Общий синтаксис опкода в Sanny Builder представлена следующим образом:

```
YXXX: 0 1 2
```

Где `YXXX` — это `ID`(идентификатор — число в [шестнадцатеричной системе](https://ru.wikipedia.org/wiki/%D0%A8%D0%B5%D1%81%D1%82%D0%BD%D0%B0%D0%B4%D1%86%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D1%87%D0%BD%D0%B0%D1%8F\_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0\_%D1%81%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F) счисления), а `0 1 2` — это параметры. Количество параметров напрямую зависит от опкода. Их может быть несколько, они могут отсутствовать или не иметь фиксированного количества. Символ **`:`** используется как разделитель.

Часть числа, пемеченного как `Y`, имеет особое свойство. Дело в том, что многие опкоды могут использоваться не только как прямой вызов некой команды игры, но и использовать её инвертированную версию этой команды для внутренней работы, например при проверках различных состояний. В этом случае самый старший бит отвечает за версию опкода: если он равен `0`, то команда будет выполняться как обычно; если `1`, то — инвертированная версия. Больше подроностей я попытаюсь донести в статье об условиях.

**ID** опкода ограничен 2-мя байтами, так что общее число опкодов с учётом двух версий будет не больше `7FFF`, то есть 32767 штук. Этого будет более чем достаточно для добавления опкодов плагинами в будущем :)

Если вспомнить секцию о комментариях, то я упомянул о неких <mark style="color:orange;">**явных**</mark> комментариях со своим синтакисом, то есть также <mark style="color:green;">**неявные**</mark>: описание опкода и параметров, который также игнорируется Sanny Builder. Во внимание берётся только его параметры. Например, это будет восприниматься редакором как одно и тоже при создании скрипта:

```
0001: 1000
0001: wait 1000 ms
0001: my_any_custom_text 1000
```

Как правило каждый опкод имеет описание и оно может отличаться в разных режимах редактирования. Более того, опкоды под разные игры и даже версии игр могут иметь разное количетсво параметров, не использоваться вовсе или просто ничего не делать. Это всё уже нужно будет делать индивидуально!

### «Команда»

Под этим словом подразумевается особый способ использования опкодов. В частности в синтаксисе команды не используется **ID** опкода, разделитель `:` и нет описаниня. Всё сводится к такому синтаксису:

```
wait 1000
```

Если параметры конкретно для \`wait\` можно запомнить, то когда будет больше таких параметров вероятно мы забудет что за что отвечает. Выходом из ситуации оказалить <mark style="color:green;">**явные**</mark> комментарии. Они не нарушили синтаксис и дали возможность читать описание. В общем виде они представлены так:

```pascal
{0001:} wait {time} [int]
```

Мы видим запись `[int]`. Она не является комментарием, но помогает заранее узнать какой тип данных параметра нужно использовать вместо этого блока. В данном случае типом будет целое число, а его значение — `1000`. Окончательный вариант:

```pascal
{0001:} wait {time} 1000 // ждём 1 секунду
```

Далее в статьях я буду пытаться использовать команды, хотя сами термины "Опкод" и "Команда" основном одну и ту же функцию в Sanny Builder.

### Поиск команд

Количество команд дастаточно много и постоянно пополняются разными расширениями, помимо CLEO. Большинство из них можно найти на сайте [библиотеки Sanny Builder](https://library.sannybuilder.com/) и получить больше сведений о нужной команде.

Нам доступен список команд также прямо из Sanny Builder в меню `Сервис->Инструменты->Поиск опкодов` (`Tools->IDE Tools->Opcode Search` на английском) или использовать горячие клавиши: `Ctrl`+`Alt`+`2` (по умолчанию):

<figure><img src="https://github.com/wmysterio/scm-scripting-lessons/raw/resources/images/sb_opcode_search_tool.png" alt=""><figcaption><p>Окно поиска опкодов</p></figcaption></figure>

Этот поисковик можно испольовать оффлайн, так что&#x20;





### Команда wait

### Команда script\_name

Рассмотрим новую важную команду:

```
{03A4:} script_name {name} [string]
```

В своей сути она устанавивает имя (уникальный **`ID`**) текущего скрипта. Некоторые опкоды могут использовать это имя в различных целях, а Sanny Builder может использовать это имя для формирования названий меток (будет отдельная статья), что помогает при чтении кода в больших проектах.

{% hint style="info" %}
&#x20;Сейчас я не буду описать эти опкоды, но нужно это иметь ввиду!
{% endhint %}



//...



Автор: **wmysterio**. Спасибо **Seemann** за некотрые важные уточнения!
